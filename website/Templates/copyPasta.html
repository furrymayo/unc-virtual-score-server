{% extends "base.html" %}
{% block title %}Gymnastics Scoreboard{% endblock %}

{% block content %}
<section class="scoreboard-shell">
    <div class="scoreboard-header">
        <div>
            <div class="scoreboard-title">Gymnastics</div>
            <div class="scoreboard-subtitle">Placeholder feed</div>
        </div>
        <div class="meta-row">
            <div class="meta-chip">Rotation <span id="gym-rotation">n/a</span></div>
            <div class="meta-chip">Event <span id="gym-event">n/a</span></div>
            <div class="meta-chip">Session <span id="gym-session">n/a</span></div>
        </div>
    </div>

    <div class="score-grid">
        <div class="team-card">
            <div class="team-label">Home</div>
            <div class="team-score" id="gym-home-score">n/a</div>
            <div class="team-meta">
                <div class="stat-line"><span>Vault</span><strong id="gym-home-vault">n/a</strong></div>
                <div class="stat-line"><span>Bars</span><strong id="gym-home-bars">n/a</strong></div>
            </div>
        </div>
        <div class="center-card">
            <div class="center-label">Current Event</div>
            <div class="center-value" id="gym-current-event">n/a</div>
        </div>
        <div class="team-card">
            <div class="team-label">Visitor</div>
            <div class="team-score" id="gym-visitor-score">n/a</div>
            <div class="team-meta">
                <div class="stat-line"><span>Beam</span><strong id="gym-visitor-beam">n/a</strong></div>
                <div class="stat-line"><span>Floor</span><strong id="gym-visitor-floor">n/a</strong></div>
            </div>
        </div>
    </div>

    <div class="section-title">Rotation Detail</div>
    <div class="stat-grid">
        <div class="stat-card">
            <div class="stat-label">Home Lineup</div>
            <div class="stat-value" id="gym-home-lineup">n/a</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Visitor Lineup</div>
            <div class="stat-value" id="gym-visitor-lineup">n/a</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Lead Gymnast</div>
            <div class="stat-value" id="gym-lead">n/a</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Last Score</div>
            <div class="stat-value" id="gym-last-score">n/a</div>
        </div>
    </div>
</section>

<script>
    function renderGymnastics(data) {
        setText('gym-rotation', data.rotation);
        setText('gym-event', data.event);
        setText('gym-session', data.session);
        setText('gym-home-score', data.home_score);
        setText('gym-visitor-score', data.visitor_score);
        setText('gym-current-event', data.current_event);
        setText('gym-home-vault', data.home_vault);
        setText('gym-home-bars', data.home_bars);
        setText('gym-visitor-beam', data.visitor_beam);
        setText('gym-visitor-floor', data.visitor_floor);
        setText('gym-home-lineup', data.home_lineup);
        setText('gym-visitor-lineup', data.visitor_lineup);
        setText('gym-lead', data.lead_gymnast);
        setText('gym-last-score', data.last_score);
    }

    function fetchGymnasticsData() {
        fetchData('Gymnastics');
    }

    fetchGymnasticsData();
    setInterval(fetchGymnasticsData, 1000);

    document.addEventListener('dataFetched', function (event) {
        renderGymnastics(event.detail || {});
    });
</script>
{% endblock %}
